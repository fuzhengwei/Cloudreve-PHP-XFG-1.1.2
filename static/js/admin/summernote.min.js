!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(window.jQuery)}(function(a){"use strict";var h,b=function(){var b=function(a){return function(b){return a===b}},c=function(a,b){return a===b},d=function(a){return function(b,c){return b[a]===c[a]}},e=function(){return!0},f=function(){return!1},g=function(a){return function(){return!a.apply(a,arguments)}},h=function(a,b){return function(c){return a(c)&&b(c)}},i=function(a){return a},j=function(a,b){return function(){return a[b].apply(a,arguments)}},k=0,l=function(a){var b=++k+"";return a?a+b:b},m=function(b){var c=a(document);return{top:b.top+c.scrollTop(),left:b.left+c.scrollLeft(),width:b.right-b.left,height:b.bottom-b.top}},n=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b},o=function(a,b){return b=b||"",b+a.split(".").map(function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}).join("")};return{eq:b,eq2:c,peq2:d,ok:e,fail:f,self:i,not:g,and:h,invoke:j,uniqueId:l,rect2bnd:m,invertObject:n,namespaceToCamel:o}}(),c=function(){var c=function(a){return a[0]},d=function(a){return a[a.length-1]},e=function(a){return a.slice(0,a.length-1)},f=function(a){return a.slice(1)},g=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(b(e))return e}},h=function(a,b){for(var c=0,d=a.length;c<d;c++)if(!b(a[c]))return!1;return!0},i=function(b,c){return a.inArray(c,b)},j=function(a,b){return i(a,b)!==-1},k=function(a,c){return c=c||b.self,a.reduce(function(a,b){return a+c(b)},0)},l=function(a){for(var b=[],c=-1,d=a.length;++c<d;)b[c]=a[c];return b},m=function(a){return!a||!a.length},n=function(a,b){if(!a.length)return[];var e=f(a);return e.reduce(function(a,c){var e=d(a);return b(d(e),c)?e[e.length]=c:a[a.length]=[c],a},[[c(a)]])},o=function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},p=function(a){for(var b=[],c=0,d=a.length;c<d;c++)j(b,a[c])||b.push(a[c]);return b},q=function(a,b){var c=i(a,b);return c===-1?null:a[c+1]},r=function(a,b){var c=i(a,b);return c===-1?null:a[c-1]};return{head:c,last:d,initial:e,tail:f,prev:r,next:q,find:g,contains:j,all:h,sum:k,from:l,isEmpty:m,clusterBy:n,compact:o,unique:p}}(),d="function"==typeof define&&define.amd,e=function(b){var c="Comic Sans MS"===b?"Courier New":"Comic Sans MS",d=a("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),e=d.css("fontFamily",c).width(),f=d.css("fontFamily",b+","+c).width();return d.remove(),e!==f},f=navigator.userAgent,g=/MSIE|Trident/i.test(f);if(g){var i=/MSIE (\d+[.]\d+)/.exec(f);i&&(h=parseFloat(i[1])),i=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(f),i&&(h=parseFloat(i[1]))}var j=/Edge\/\d+/.test(f),k=!!window.CodeMirror;if(!k&&d&&require)if(require.hasOwnProperty("resolve"))try{require.resolve("codemirror"),k=!0}catch(a){k=!1}else require.hasOwnProperty("specified")&&(k=require.specified("codemirror"));var l={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:g,isEdge:j,isFF:!j&&/firefox/i.test(f),isPhantom:/PhantomJS/i.test(f),isWebkit:!j&&/webkit/i.test(f),isChrome:!j&&/chrome/i.test(f),isSafari:!j&&/safari/i.test(f),browserVersion:h,jqueryVersion:parseFloat(a.fn.jquery),isSupportAmd:d,hasCodeMirror:k,isFontInstalled:e,isW3CRangeSupport:!!document.createRange},m=String.fromCharCode(160),n="\ufeff",o=function(){var d=function(b){return b&&a(b).hasClass("note-editable")},e=function(b){return b&&a(b).hasClass("note-control-sizing")},f=function(a){return a=a.toUpperCase(),function(b){return b&&b.nodeName.toUpperCase()===a}},g=function(a){return a&&3===a.nodeType},h=function(a){return a&&1===a.nodeType},i=function(a){return a&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(a.nodeName.toUpperCase())},j=function(a){return!d(a)&&(a&&/^DIV|^P|^LI|^H[1-7]/.test(a.nodeName.toUpperCase()))},k=function(a){return a&&/^H[1-7]/.test(a.nodeName.toUpperCase())},p=f("PRE"),q=f("LI"),r=function(a){return j(a)&&!q(a)},s=f("TABLE"),t=function(a){return!(y(a)||u(a)||v(a)||j(a)||s(a)||x(a))},u=function(a){return a&&/^UL|^OL/.test(a.nodeName.toUpperCase())},v=f("HR"),w=function(a){return a&&/^TD|^TH/.test(a.nodeName.toUpperCase())},x=f("BLOCKQUOTE"),y=function(a){return w(a)||x(a)||d(a)},z=f("A"),A=function(a){return t(a)&&!!J(a,j)},B=function(a){return t(a)&&!J(a,j)},C=f("BODY"),D=function(a,b){return a.nextSibling===b||a.previousSibling===b},E=function(a,c){c=c||b.ok;var d=[];return a.previousSibling&&c(a.previousSibling)&&d.push(a.previousSibling),d.push(a),a.nextSibling&&c(a.nextSibling)&&d.push(a.nextSibling),d},F=l.isMSIE&&l.browserVersion<11?"&nbsp;":"<br>",G=function(a){return g(a)?a.nodeValue.length:a.childNodes.length},H=function(a){var b=G(a);return 0===b||(!g(a)&&1===b&&a.innerHTML===F||!(!c.all(a.childNodes,g)||""!==a.innerHTML))},I=function(a){i(a)||G(a)||(a.innerHTML=F)},J=function(a,b){for(;a;){if(b(a))return a;if(d(a))break;a=a.parentNode}return null},K=function(a,b){for(a=a.parentNode;a&&1===G(a);){if(b(a))return a;if(d(a))break;a=a.parentNode}return null},L=function(a,c){c=c||b.fail;var e=[];return J(a,function(a){return d(a)||e.push(a),c(a)}),e},M=function(a,b){var d=L(a);return c.last(d.filter(b))},N=function(b,c){for(var d=L(b),e=c;e;e=e.parentNode)if(a.inArray(e,d)>-1)return e;return null},O=function(a,c){c=c||b.fail;for(var d=[];a&&!c(a);)d.push(a),a=a.previousSibling;return d},P=function(a,c){c=c||b.fail;for(var d=[];a&&!c(a);)d.push(a),a=a.nextSibling;return d},Q=function(a,c){var d=[];return c=c||b.ok,function b(e){a!==e&&c(e)&&d.push(e);for(var f=0,g=e.childNodes.length;f<g;f++)b(e.childNodes[f])}(a),d},R=function(b,c){var d=b.parentNode,e=a("<"+c+">")[0];return d.insertBefore(e,b),e.appendChild(b),e},S=function(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a},T=function(b,c){return a.each(c,function(a,c){b.appendChild(c)}),b},U=function(a){return 0===a.offset},V=function(a){return a.offset===G(a.node)},W=function(a){return U(a)||V(a)},X=function(a,b){for(;a&&a!==b;){if(0!==_(a))return!1;a=a.parentNode}return!0},Y=function(a,b){for(;a&&a!==b;){if(_(a)!==G(a.parentNode)-1)return!1;a=a.parentNode}return!0},Z=function(a,b){return U(a)&&X(a.node,b)},$=function(a,b){return V(a)&&Y(a.node,b)},_=function(a){for(var b=0;a=a.previousSibling;)b+=1;return b},aa=function(a){return!!(a&&a.childNodes&&a.childNodes.length)},ba=function(a,b){var c,e;if(0===a.offset){if(d(a.node))return null;c=a.node.parentNode,e=_(a.node)}else aa(a.node)?(c=a.node.childNodes[a.offset-1],e=G(c)):(c=a.node,e=b?0:a.offset-1);return{node:c,offset:e}},ca=function(a,b){var c,e;if(G(a.node)===a.offset){if(d(a.node))return null;c=a.node.parentNode,e=_(a.node)+1}else aa(a.node)?(c=a.node.childNodes[a.offset],e=0):(c=a.node,e=b?G(a.node):a.offset+1);return{node:c,offset:e}},da=function(a,b){return a.node===b.node&&a.offset===b.offset},ea=function(a){if(g(a.node)||!aa(a.node)||H(a.node))return!0;var b=a.node.childNodes[a.offset-1],c=a.node.childNodes[a.offset];return!(b&&!i(b)||c&&!i(c))},fa=function(a,b){for(;a;){if(b(a))return a;a=ba(a)}return null},ga=function(a,b){for(;a;){if(b(a))return a;a=ca(a)}return null},ha=function(a){if(!g(a.node))return!1;var b=a.node.nodeValue.charAt(a.offset-1);return b&&" "!==b&&b!==m},ia=function(a,b,c,d){for(var e=a;e&&(c(e),!da(e,b));){var f=d&&a.node!==e.node&&b.node!==e.node;e=ca(e,f)}},ja=function(a,c){var d=L(c,b.eq(a));return d.map(_).reverse()},ka=function(a,b){for(var c=a,d=0,e=b.length;d<e;d++)c=c.childNodes.length<=b[d]?c.childNodes[c.childNodes.length-1]:c.childNodes[b[d]];return c},la=function(a,b){var c=b&&b.isSkipPaddingBlankHTML,d=b&&b.isNotSplitEdgePoint;if(W(a)&&(g(a.node)||d)){if(U(a))return a.node;if(V(a))return a.node.nextSibling}if(g(a.node))return a.node.splitText(a.offset);var e=a.node.childNodes[a.offset],f=S(a.node.cloneNode(!1),a.node);return T(f,P(e)),c||(I(a.node),I(f)),f},ma=function(a,c,d){var e=L(c.node,b.eq(a));return e.length?1===e.length?la(c,d):e.reduce(function(a,b){return a===c.node&&(a=la(c,d)),la({node:b,offset:a?o.position(a):G(b)},d)}):null},na=function(a,b){var g,h,d=b?j:y,e=L(a.node,d),f=c.last(e)||a.node;d(f)?(g=e[e.length-2],h=f):(g=f,h=g.parentNode);var i=g&&ma(g,a,{isSkipPaddingBlankHTML:b,isNotSplitEdgePoint:b});return i||h!==a.node||(i=a.node.childNodes[a.offset]),{rightNode:i,container:h}},oa=function(a){return document.createElement(a)},pa=function(a){return document.createTextNode(a)},qa=function(a,b){if(a&&a.parentNode){if(a.removeNode)return a.removeNode(b);var c=a.parentNode;if(!b){var e,f,d=[];for(e=0,f=a.childNodes.length;e<f;e++)d.push(a.childNodes[e]);for(e=0,f=d.length;e<f;e++)c.insertBefore(d[e],a)}c.removeChild(a)}},ra=function(a,b){for(;a&&!d(a)&&b(a);){var c=a.parentNode;qa(a),a=c}},sa=function(a,b){if(a.nodeName.toUpperCase()===b.toUpperCase())return a;var d=oa(b);return a.style.cssText&&(d.style.cssText=a.style.cssText),T(d,c.from(a.childNodes)),S(d,a),qa(a),d},ta=f("TEXTAREA"),ua=function(a,b){var c=ta(a[0])?a.val():a.html();return b?c.replace(/[\n\r]/g,""):c},va=function(b,c){var d=ua(b);if(c){var e=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;d=d.replace(e,function(a,b,c){c=c.toUpperCase();var d=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(c)&&!!b,e=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(c);return a+(d||e?"\n":"")}),d=a.trim(d)}return d},wa=function(b){var c=a(b),d=c.offset(),e=c.outerHeight(!0);return{left:d.left,top:d.top+e}},xa=function(a,b){Object.keys(b).forEach(function(c){a.on(c,b[c])})},ya=function(a,b){Object.keys(b).forEach(function(c){a.off(c,b[c])})};return{NBSP_CHAR:m,ZERO_WIDTH_NBSP_CHAR:n,blank:F,emptyPara:"<p>"+F+"</p>",makePredByNodeName:f,isEditable:d,isControlSizing:e,isText:g,isElement:h,isVoid:i,isPara:j,isPurePara:r,isHeading:k,isInline:t,isBlock:b.not(t),isBodyInline:B,isBody:C,isParaInline:A,isPre:p,isList:u,isTable:s,isCell:w,isBlockquote:x,isBodyContainer:y,isAnchor:z,isDiv:f("DIV"),isLi:q,isBR:f("BR"),isSpan:f("SPAN"),isB:f("B"),isU:f("U"),isS:f("S"),isI:f("I"),isImg:f("IMG"),isTextarea:ta,isEmpty:H,isEmptyAnchor:b.and(z,H),isClosestSibling:D,withClosestSiblings:E,nodeLength:G,isLeftEdgePoint:U,isRightEdgePoint:V,isEdgePoint:W,isLeftEdgeOf:X,isRightEdgeOf:Y,isLeftEdgePointOf:Z,isRightEdgePointOf:$,prevPoint:ba,nextPoint:ca,isSamePoint:da,isVisiblePoint:ea,prevPointUntil:fa,nextPointUntil:ga,isCharPoint:ha,walkPoint:ia,ancestor:J,singleChildAncestor:K,listAncestor:L,lastAncestor:M,listNext:P,listPrev:O,listDescendant:Q,commonAncestor:N,wrap:R,insertAfter:S,appendChildNodes:T,position:_,hasChildren:aa,makeOffsetPath:ja,fromOffsetPath:ka,splitTree:ma,splitPoint:na,create:oa,createText:pa,remove:qa,removeWhile:ra,replace:sa,html:va,value:ua,posFromPlaceholder:wa,attachEvents:xa,detachEvents:ya}}(),p=function(d,e){var f=this,g=a.summernote.ui;return this.memos={},this.modules={},this.layoutInfo={},this.options=e,this.initialize=function(){return this.layoutInfo=g.createLayout(d,e),this._initialize(),d.hide(),this},this.destroy=function(){this._destroy(),d.removeData("summernote"),g.removeLayout(d,this.layoutInfo)},this.reset=function(){var a=f.isDisabled();this.code(o.emptyPara),this._destroy(),this._initialize(),a&&f.disable()},this._initialize=function(){var b=a.extend({},this.options.buttons);Object.keys(b).forEach(function(a){f.memo("button."+a,b[a])});var c=a.extend({},this.options.modules,a.summernote.plugins||{});Object.keys(c).forEach(function(a){f.module(a,c[a],!0)}),Object.keys(this.modules).forEach(function(a){f.initializeModule(a)})},this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(a){f.removeModule(a)}),Object.keys(this.memos).forEach(function(a){f.removeMemo(a)})},this.code=function(a){var b=this.invoke("codeview.isActivated");return void 0===a?(this.invoke("codeview.sync"),b?this.layoutInfo.codable.val():this.layoutInfo.editable.html()):(b?this.layoutInfo.codable.val(a):this.layoutInfo.editable.html(a),d.val(a),this.triggerEvent("change",a),void 0)},this.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},this.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0)},this.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0)},this.triggerEvent=function(){var a=c.head(arguments),e=c.tail(c.from(arguments)),f=this.options.callbacks[b.namespaceToCamel(a,"on")];f&&f.apply(d[0],e),d.trigger("summernote."+a,e)},this.initializeModule=function(a){var c=this.modules[a];c.shouldInitialize=c.shouldInitialize||b.ok,c.shouldInitialize()&&(c.initialize&&c.initialize(),c.events&&o.attachEvents(d,c.events))},this.module=function(a,b,c){return 1===arguments.length?this.modules[a]:(this.modules[a]=new b(this),void(c||this.initializeModule(a)))},this.removeModule=function(a){var b=this.modules[a];b.shouldInitialize()&&(b.events&&o.detachEvents(d,b.events),b.destroy&&b.destroy()),delete this.modules[a]},this.memo=function(a,b){return 1===arguments.length?this.memos[a]:void(this.memos[a]=b)},this.removeMemo=function(a){this.memos[a]&&this.memos[a].destroy&&this.memos[a].destroy(),delete this.memos[a]},this.createInvokeHandler=function(b,c){return function(d){d.preventDefault(),f.invoke(b,c||a(d.target).closest("[data-value]").data("value"))}},this.invoke=function(){var a=c.head(arguments),b=c.tail(c.from(arguments)),d=a.split("."),e=d.length>1,f=e&&c.head(d),g=e?c.last(d):c.head(d),h=this.modules[f||"editor"];return!f&&this[g]?this[g].apply(this,b):h&&h[g]&&h.shouldInitialize()?h[g].apply(h,b):void 0},this.initialize()};a.fn.extend({summernote:function(){var b=a.type(c.head(arguments)),d="string"===b,e="object"===b,f=e?c.head(arguments):{};f=a.extend({},a.summernote.options,f),f.langInfo=a.extend(!0,{},a.summernote.lang["en-US"],a.summernote.lang[f.lang]),this.each(function(b,c){var d=a(c);if(!d.data("summernote")){var e=new p(d,f);d.data("summernote",e),d.data("summernote").triggerEvent("init",e.layoutInfo)}});var g=this.first();if(g.length){var h=g.data("summernote");if(d)return h.invoke.apply(h,c.from(arguments));f.focus&&h.invoke("editor.focus")}return this}});var q=function(b,c,d,e){this.render=function(f){var g=a(b);if(d&&d.contents&&g.html(d.contents),d&&d.className&&g.addClass(d.className),d&&d.data&&a.each(d.data,function(a,b){g.attr("data-"+a,b)}),d&&d.click&&g.on("click",d.click),c){var h=g.find(".note-children-container");c.forEach(function(a){a.render(h.length?h:g)})}return e&&e(g,d),d&&d.callback&&d.callback(g),f&&f.append(g),g}},r={create:function(b,c){return function(){var d=a.isArray(arguments[0])?arguments[0]:[],e="object"==typeof arguments[1]?arguments[1]:arguments[0];return e&&e.children&&(d=e.children),new q(b,d,e,c)}}},s=r.create('<div class="note-editor note-frame card"/>'),t=r.create('<div class="note-toolbar card-header btn-toolbar"/>'),u=r.create('<div class="note-editing-area"/>'),v=r.create('<textarea class="note-codable"/>'),w=r.create('<div class="note-editable card-block" contentEditable="true"/>'),x=r.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),y=r.create('<div class="note-editor"/>'),z=r.create('<div class="note-editable" contentEditable="true"/>'),A=r.create('<div class="note-btn-group btn-group">'),B=r.create('<button type="button" class="note-btn btn">',function(a,b){var c=["btn","-"+(b.type||"secondary"),b.outline?"-outline":""].join("");a.addClass(c),b&&b.tooltip&&a.attr({title:b.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}),C=r.create('<div class="dropdown-menu">',function(b,c){var d=a.isArray(c.items)?c.items.map(function(b){var d="string"==typeof b?b:b.value||"",e=c.template?c.template(b):b,f=a('<a class="dropdown-item" href="#" data-value="'+d+'"></a>');return f.html(e).data("item",b),f}):c.items;b.html(d),b.on("click","> .dropdown-item",function(b){var d=a(this),e=d.data("item"),f=d.data("value");e.click?e.click(d):c.itemClick&&c.itemClick(b,e,f)})}),D=r.create('<div class="dropdown-menu note-check">',function(b,c){var d=a.isArray(c.items)?c.items.map(function(b){var d="string"==typeof b?b:b.value||"",e=c.template?c.template(b):b,f=a('<a class="dropdown-item" href="#" data-value="'+d+'"></a>');return f.html([Q(c.checkClassName)," ",e]).data("item",b),f}):c.items;b.html(d),b.on("click","> .dropdown-item",function(b){var d=a(this),e=d.data("item"),f=d.data("value");e.click?e.click(d):c.itemClick&&c.itemClick(b,e,f)})}),E=function(a,b){return A([B({className:"dropdown-toggle",contents:a.title+" "+Q("caret","span"),tooltip:a.tooltip,data:{toggle:"dropdown"}}),C({className:a.className,items:a.items,template:a.template,itemClick:a.itemClick})],{callback:b}).render()},F=function(a,b){return A([B({className:"dropdown-toggle",contents:a.title+" "+Q("caret","span"),tooltip:a.tooltip,data:{toggle:"dropdown"}}),D({className:a.className,checkClassName:a.checkClassName,items:a.items,template:a.template,itemClick:a.itemClick})],{callback:b}).render()},G=function(a){return A([B({className:"dropdown-toggle",contents:a.title+" "+Q("caret","span"),tooltip:a.tooltip,data:{toggle:"dropdown"}}),C([A({className:"note-align",children:a.items[0]}),A({className:"note-list",children:a.items[1]})])]).render()},H=function(b,c,d){var k,e=18,f=a(b.target.parentNode),g=f.next(),h=f.find(".note-dimension-picker-mousecatcher"),i=f.find(".note-dimension-picker-highlighted"),j=f.find(".note-dimension-picker-unhighlighted");if(void 0===b.offsetX){var l=a(b.target).offset();k={x:b.pageX-l.left,y:b.pageY-l.top}}else k={x:b.offsetX,y:b.offsetY};var m={c:Math.ceil(k.x/e)||1,r:Math.ceil(k.y/e)||1};i.css({width:m.c+"em",height:m.r+"em"}),h.data("value",m.c+"x"+m.r),3<m.c&&m.c<c&&j.css({width:m.c+1+"em"}),3<m.r&&m.r<d&&j.css({height:m.r+1+"em"}),g.html(m.c+" x "+m.r)},I=function(a){return A([B({className:"dropdown-toggle",contents:a.title+" "+Q("caret","span"),tooltip:a.tooltip,data:{toggle:"dropdown"}}),C({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(b){var c=b.find(".note-dimension-picker-mousecatcher");c.css({width:a.col+"em",height:a.row+"em"}).mousedown(a.itemClick).mousemove(function(b){H(b,a.col,a.row)})}}).render()},J=r.create('<div class="note-color-palette"/>',function(a,b){for(var c=[],d=0,e=b.colors.length;d<e;d++){for(var f=b.eventName,g=b.colors[d],h=[],i=0,j=g.length;i<j;i++){var k=g[i];h.push(['<button type="button" class="note-color-btn"','style="background-color:',k,'" ','data-event="',f,'" ','data-value="',k,'" ','title="',k,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}c.push('<div class="note-color-row">'+h.join("")+"</div>")}a.html(c.join("")),a.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})}),K=function(b,c){return A({className:"note-color",children:[B({className:"note-current-color-button",contents:b.title,tooltip:b.lang.color.recent,click:b.currentClick,callback:function(a){var b=a.find(".note-recent-color");"foreColor"!==c&&(b.css("background-color","#FFFF00"),a.attr("data-backColor","#FFFF00"))}}),B({className:"dropdown-toggle",contents:Q("caret","span"),tooltip:b.lang.color.more,data:{toggle:"dropdown"}}),C({items:["<div>",'<div class="btn-group btn-background-color">','  <div class="note-palette-title">'+b.lang.color.background+"</div>","  <div>",'<button type="button" class="note-color-reset btn btn-secondary btn-block"  data-event="backColor" data-value="inherit">',b.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group btn-foreground-color">','  <div class="note-palette-title">'+b.lang.color.foreground+"</div>","  <div>",'<button type="button" class="note-color-reset btn btn-secondary btn-block"  data-event="removeFormat" data-value="foreColor">',b.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</div>"].join(""),callback:function(d){d.find(".note-holder").each(function(){var c=a(this);c.append(J({colors:b.colors,eventName:c.data("event")}).render())}),"fore"===c?(d.find(".btn-background-color").hide(),d.css({"min-width":"210px"})):"back"===c&&(d.find(".btn-foreground-color").hide(),d.css({"min-width":"210px"}))},click:function(d){var e=a(d.target),f=e.data("event"),g=e.data("value");if(f&&g){var h="backColor"===f?"background-color":"color",i=e.closest(".note-color").find(".note-recent-color"),j=e.closest(".note-color").find(".note-current-color-button");i.css(h,g),j.attr("data-"+f,g),"fore"===c?b.itemClick("foreColor",g):"back"===c?b.itemClick("backColor",g):b.itemClick(f,g)}}})]}).render()},L=r.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(a,b){b.fade&&a.addClass("fade"),a.html(['<div class="modal-dialog">','  <div class="modal-content">',b.title?'    <div class="modal-header">      <h4 class="modal-title">'+b.title+'</h4>      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>    </div>':"",'    <div class="modal-body">'+b.body+"</div>",b.footer?'    <div class="modal-footer">'+b.footer+"</div>":"","  </div>","</div>"].join(""))}),M=function(a){var b='<div class="form-group row-fluid"><label>'+a.lang.video.url+' <small class="text-muted">'+a.lang.video.providers+'</small></label><input class="note-video-url form-control span12" type="text" /></div>',c=['<button type="button" href="#" class="btn btn-primary note-video-btn disabled" disabled>',a.lang.video.insert,"</button>"].join("");return L({title:a.lang.video.insert,fade:a.fade,body:b,footer:c}).render()},N=function(a){var b='<div class="form-group note-group-select-from-files"><label>'+a.lang.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+a.imageLimitation+'</div><div class="form-group" style="overflow:auto;"><label>'+a.lang.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>',c=['<button href="#" type="button" class="btn btn-primary note-image-btn disabled" disabled>',a.lang.image.insert,"</button>"].join("");return L({title:a.lang.image.insert,fade:a.fade,body:b,footer:c}).render()},O=function(a){var b='<div class="form-group"><label>'+a.lang.link.textToDisplay+'</label><input class="note-link-text form-control" type="text" /></div><div class="form-group"><label>'+a.lang.link.url+'</label><input class="note-link-url form-control" type="text" value="http://" /></div>'+(a.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+a.lang.link.openInNewWindow+"</label></div>"),c=['<button href="#" type="button" class="btn btn-primary note-link-btn disabled" disabled>',a.lang.link.insert,"</button>"].join("");return L({className:"link-dialog",title:a.lang.link.insert,fade:a.fade,body:b,footer:c}).render()},P=r.create(['<div class="note-popover popover fade in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(a,b){var c="undefined"!=typeof b.direction?b.direction:"bottom";a.addClass(c).hide(),b.hideArrow&&a.find(".arrow").hide()}),Q=function(a,b){return b=b||"i","<"+b+' class="'+a+'"/>'},R={editor:s,toolbar:t,editingArea:u,codable:v,editable:w,statusbar:x,airEditor:y,airEditable:z,buttonGroup:A,button:B,dropdown:C,dropdownCheck:D,dropdownButton:E,dropdownCheckButton:F,paragraphDropdownButton:G,tableDropdownButton:I,colorDropdownButton:K,palette:J,dialog:L,videoDialog:M,imageDialog:N,linkDialog:O,popover:P,icon:Q,toggleBtn:function(a,b){a.toggleClass("disabled",!b),a.attr("disabled",!b)},toggleBtnActive:function(a,b){a.toggleClass("active",b)},check:function(a,b){a.find(".checked").removeClass("checked"),a.find('[data-value="'+b+'"]').addClass("checked")},onDialogShown:function(a,b){a.one("shown.bs.modal",b)},onDialogHidden:function(a,b){a.one("hidden.bs.modal",b)},showDialog:function(a){a.modal("show")},hideDialog:function(a){a.modal("hide")},getPopoverContent:function(a){return a.find(".popover-content")},getDialogBody:function(a){return a.find(".modal-body")},createLayout:function(a,b){var c=(b.airMode?R.airEditor([R.editingArea([R.airEditable()])]):R.editor([R.toolbar(),R.editingArea([R.codable(),R.editable()]),R.statusbar()])).render();return c.insertAfter(a),{note:a,editor:c,toolbar:c.find(".note-toolbar"),editingArea:c.find(".note-editing-area"),editable:c.find(".note-editable"),codable:c.find(".note-codable"),statusbar:c.find(".note-statusbar")}},removeLayout:function(a,b){a.html(b.editable.html()),b.editor.remove(),a.off("summernote"),a.show()}};a.summernote=a.summernote||{lang:{}},a.extend(a.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var ca,S=function(){var a={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(b){return c.contains([a.BACKSPACE,a.TAB,a.ENTER,a.SPACE],b)},isMove:function(b){return c.contains([a.LEFT,a.UP,a.RIGHT,a.DOWN],b)},nameFromCode:b.invertObject(a),code:a}}(),T=function(){var d=function(a,b){var e,g,d=a.parentElement(),f=document.body.createTextRange(),h=c.from(d.childNodes);for(e=0;e<h.length;e++)if(!o.isText(h[e])){if(f.moveToElementText(h[e]),f.compareEndPoints("StartToStart",a)>=0)break;g=h[e]}if(0!==e&&o.isText(h[e-1])){var i=document.body.createTextRange(),j=null;i.moveToElementText(g||d),i.collapse(!g),j=g?g.nextSibling:d.firstChild;var k=a.duplicate();k.setEndPoint("StartToStart",i);for(var l=k.text.replace(/[\r\n]/g,"").length;l>j.nodeValue.length&&j.nextSibling;)l-=j.nodeValue.length,j=j.nextSibling;j.nodeValue;b&&j.nextSibling&&o.isText(j.nextSibling)&&l===j.nodeValue.length&&(l-=j.nodeValue.length,j=j.nextSibling),d=j,e=l}return{cont:d,offset:e}},e=function(a){var d=function(a,e){var f,g;if(o.isText(a)){var h=o.listPrev(a,b.not(o.isText)),i=c.last(h).previousSibling;f=i||a.parentNode,e+=c.sum(c.tail(h),o.nodeLength),g=!i}else{if(f=a.childNodes[e]||a,o.isText(f))return d(f,0);e=0,g=!1}return{node:f,collapseToStart:g,offset:e}},e=document.body.createTextRange(),f=d(a.node,a.offset);return e.moveToElementText(f.node),e.collapse(f.collapseToStart),e.moveStart("character",f.offset),e},f=function(d,g,h,i){this.sc=d,this.so=g,this.ec=h,this.eo=i;var j=function(){if(l.isW3CRangeSupport){var a=document.createRange();return a.setStart(d,g),a.setEnd(h,i),a}var b=e({node:d,offset:g});return b.setEndPoint("EndToEnd",e({node:h,offset:i})),b};this.getPoints=function(){return{sc:d,so:g,ec:h,eo:i}},this.getStartPoint=function(){return{node:d,offset:g}},this.getEndPoint=function(){return{node:h,offset:i}},this.select=function(){var a=j();if(l.isW3CRangeSupport){var b=document.getSelection();b.rangeCount>0&&b.removeAllRanges(),b.addRange(a)}else a.select();return this},this.scrollIntoView=function(b){var c=a(b).height();return b.scrollTop+c<this.sc.offsetTop&&(b.scrollTop+=Math.abs(b.scrollTop+c-this.sc.offsetTop)),this},this.normalize=function(){var a=function(a,b){if(o.isVisiblePoint(a)&&!o.isEdgePoint(a)||o.isVisiblePoint(a)&&o.isRightEdgePoint(a)&&!b||o.isVisiblePoint(a)&&o.isLeftEdgePoint(a)&&b||o.isVisiblePoint(a)&&o.isBlock(a.node)&&o.isEmpty(a.node))return a;var c=o.ancestor(a.node,o.isBlock);if((o.isLeftEdgePointOf(a,c)||o.isVoid(o.prevPoint(a).node))&&!b||(o.isRightEdgePointOf(a,c)||o.isVoid(o.nextPoint(a).node))&&b){if(o.isVisiblePoint(a))return a;b=!b}var d=b?o.nextPointUntil(o.nextPoint(a),o.isVisiblePoint):o.prevPointUntil(o.prevPoint(a),o.isVisiblePoint);return d||a},b=a(this.getEndPoint(),!1),c=this.isCollapsed()?b:a(this.getStartPoint(),!0);return new f(c.node,c.offset,b.node,b.offset)},this.nodes=function(a,d){a=a||b.ok;var e=d&&d.includeAncestor,f=d&&d.fullyContains,g=this.getStartPoint(),h=this.getEndPoint(),i=[],j=[];return o.walkPoint(g,h,function(b){if(!o.isEditable(b.node)){var d;f?(o.isLeftEdgePoint(b)&&j.push(b.node),o.isRightEdgePoint(b)&&c.contains(j,b.node)&&(d=b.node)):d=e?o.ancestor(b.node,a):b.node,d&&a(d)&&i.push(d)}},!0),c.unique(i)},this.commonAncestor=function(){return o.commonAncestor(d,h)},this.expand=function(a){var b=o.ancestor(d,a),c=o.ancestor(h,a);if(!b&&!c)return new f(d,g,h,i);var e=this.getPoints();return b&&(e.sc=b,e.so=0),c&&(e.ec=c,e.eo=o.nodeLength(c)),
new f(e.sc,e.so,e.ec,e.eo)},this.collapse=function(a){return a?new f(d,g,d,g):new f(h,i,h,i)},this.splitText=function(){var a=d===h,b=this.getPoints();return o.isText(h)&&!o.isEdgePoint(this.getEndPoint())&&h.splitText(i),o.isText(d)&&!o.isEdgePoint(this.getStartPoint())&&(b.sc=d.splitText(g),b.so=0,a&&(b.ec=b.sc,b.eo=i-g)),new f(b.sc,b.so,b.ec,b.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var b=this.splitText(),d=b.nodes(null,{fullyContains:!0}),e=o.prevPointUntil(b.getStartPoint(),function(a){return!c.contains(d,a.node)}),g=[];return a.each(d,function(a,b){var c=b.parentNode;e.node!==c&&1===o.nodeLength(c)&&g.push(c),o.remove(b,!1)}),a.each(g,function(a,b){o.remove(b,!1)}),new f(e.node,e.offset,e.node,e.offset).normalize()};var k=function(a){return function(){var b=o.ancestor(d,a);return!!b&&b===o.ancestor(h,a)}};this.isOnEditable=k(o.isEditable),this.isOnList=k(o.isList),this.isOnAnchor=k(o.isAnchor),this.isOnCell=k(o.isCell),this.isLeftEdgeOf=function(a){if(!o.isLeftEdgePoint(this.getStartPoint()))return!1;var b=o.ancestor(this.sc,a);return b&&o.isLeftEdgeOf(this.sc,b)},this.isCollapsed=function(){return d===h&&g===i},this.wrapBodyInlineWithPara=function(){if(o.isBodyContainer(d)&&o.isEmpty(d))return d.innerHTML=o.emptyPara,new f(d.firstChild,0,d.firstChild,0);var a=this.normalize();if(o.isParaInline(d)||o.isPara(d))return a;var e;if(o.isInline(a.sc)){var g=o.listAncestor(a.sc,b.not(o.isInline));e=c.last(g),o.isInline(e)||(e=g[g.length-2]||a.sc.childNodes[a.so])}else e=a.sc.childNodes[a.so>0?a.so-1:0];var h=o.listPrev(e,o.isParaInline).reverse();if(h=h.concat(o.listNext(e.nextSibling,o.isParaInline)),h.length){var i=o.wrap(c.head(h),"p");o.appendChildNodes(i,c.tail(h))}return this.normalize()},this.insertNode=function(a){var b=this.wrapBodyInlineWithPara().deleteContents(),c=o.splitPoint(b.getStartPoint(),o.isInline(a));return c.rightNode?c.rightNode.parentNode.insertBefore(a,c.rightNode):c.container.appendChild(a),a},this.pasteHTML=function(b){var d=a("<div></div>").html(b)[0],e=c.from(d.childNodes),f=this.wrapBodyInlineWithPara().deleteContents();return e.reverse().map(function(a){return f.insertNode(a)}).reverse()},this.toString=function(){var a=j();return l.isW3CRangeSupport?a.toString():a.text},this.getWordRange=function(a){var b=this.getEndPoint();if(!o.isCharPoint(b))return this;var c=o.prevPointUntil(b,function(a){return!o.isCharPoint(a)});return a&&(b=o.nextPointUntil(b,function(a){return!o.isCharPoint(a)})),new f(c.node,c.offset,b.node,b.offset)},this.bookmark=function(a){return{s:{path:o.makeOffsetPath(a,d),offset:g},e:{path:o.makeOffsetPath(a,h),offset:i}}},this.paraBookmark=function(a){return{s:{path:c.tail(o.makeOffsetPath(c.head(a),d)),offset:g},e:{path:c.tail(o.makeOffsetPath(c.last(a),h)),offset:i}}},this.getClientRects=function(){var a=j();return a.getClientRects()}};return{create:function(a,b,c,d){if(4===arguments.length)return new f(a,b,c,d);if(2===arguments.length)return c=a,d=b,new f(a,b,c,d);var e=this.createFromSelection();return e||1!==arguments.length?e:(e=this.createFromNode(arguments[0]),e.collapse(o.emptyPara===arguments[0].innerHTML))},createFromSelection:function(){var a,b,c,e;if(l.isW3CRangeSupport){var g=document.getSelection();if(!g||0===g.rangeCount)return null;if(o.isBody(g.anchorNode))return null;var h=g.getRangeAt(0);a=h.startContainer,b=h.startOffset,c=h.endContainer,e=h.endOffset}else{var i=document.selection.createRange(),j=i.duplicate();j.collapse(!1);var k=i;k.collapse(!0);var m=d(k,!0),n=d(j,!1);o.isText(m.node)&&o.isLeftEdgePoint(m)&&o.isTextNode(n.node)&&o.isRightEdgePoint(n)&&n.node.nextSibling===m.node&&(m=n),a=m.cont,b=m.offset,c=n.cont,e=n.offset}return new f(a,b,c,e)},createFromNode:function(a){var b=a,c=0,d=a,e=o.nodeLength(d);return o.isVoid(b)&&(c=o.listPrev(b).length-1,b=b.parentNode),o.isBR(d)?(e=o.listPrev(d).length-1,d=d.parentNode):o.isVoid(d)&&(e=o.listPrev(d).length,d=d.parentNode),this.create(b,c,d,e)},createFromNodeBefore:function(a){return this.createFromNode(a).collapse(!0)},createFromNodeAfter:function(a){return this.createFromNode(a).collapse()},createFromBookmark:function(a,b){var c=o.fromOffsetPath(a,b.s.path),d=b.s.offset,e=o.fromOffsetPath(a,b.e.path),g=b.e.offset;return new f(c,d,e,g)},createFromParaBookmark:function(a,b){var d=a.s.offset,e=a.e.offset,g=o.fromOffsetPath(c.head(b),a.s.path),h=o.fromOffsetPath(c.last(b),a.e.path);return new f(g,d,h,e)}}}(),U=function(){var b=function(b){return a.Deferred(function(c){a.extend(new FileReader,{onload:function(a){var b=a.target.result;c.resolve(b)},onerror:function(){c.reject(this)}}).readAsDataURL(b)}).promise()},c=function(b){return a.Deferred(function(c){var d=a("<img>");d.one("load",function(){d.off("error abort"),c.resolve(d)}).one("error abort",function(){d.off("load").detach(),c.reject(d)}).css({display:"none"}).appendTo(document.body).attr("src",b)}).promise()};return{readFileAsDataURL:b,createImage:c}}(),V=function(a){var b=[],c=-1,d=a[0],e=function(){var b=T.create(d),c={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:a.html(),bookmark:b?b.bookmark(d):c}},f=function(b){null!==b.contents&&a.html(b.contents),null!==b.bookmark&&T.createFromBookmark(d,b.bookmark).select()};this.rewind=function(){a.html()!==b[c].contents&&this.recordUndo(),c=0,f(b[c])},this.reset=function(){b=[],c=-1,a.html(""),this.recordUndo()},this.undo=function(){a.html()!==b[c].contents&&this.recordUndo(),0<c&&(c--,f(b[c]))},this.redo=function(){b.length-1>c&&(c++,f(b[c]))},this.recordUndo=function(){c++,b.length>c&&(b=b.slice(0,c)),b.push(e())}},W=function(){var d=function(b,c){if(l.jqueryVersion<1.9){var d={};return a.each(c,function(a,c){d[c]=b.css(c)}),d}return b.css.call(b,c)};this.fromNode=function(a){var b=["font-family","font-size","text-align","list-style-type","line-height"],c=d(a,b)||{};return c["font-size"]=parseInt(c["font-size"],10),c},this.stylePara=function(b,c){a.each(b.nodes(o.isPara,{includeAncestor:!0}),function(b,d){a(d).css(c)})},this.styleNodes=function(d,e){d=d.splitText();var f=e&&e.nodeName||"SPAN",g=!(!e||!e.expandClosestSibling),h=!(!e||!e.onlyPartialContains);if(d.isCollapsed())return[d.insertNode(o.create(f))];var i=o.makePredByNodeName(f),j=d.nodes(o.isText,{fullyContains:!0}).map(function(a){return o.singleChildAncestor(a,i)||o.wrap(a,f)});if(g){if(h){var k=d.nodes();i=b.and(i,function(a){return c.contains(k,a)})}return j.map(function(b){var d=o.withClosestSiblings(b,i),e=c.head(d),f=c.tail(d);return a.each(f,function(a,b){o.appendChildNodes(e,b.childNodes),o.remove(b)}),c.head(d)})}return j},this.current=function(b){var c=a(o.isElement(b.sc)?b.sc:b.sc.parentNode),d=this.fromNode(c);try{d=a.extend(d,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(a){}if(b.isOnList()){var e=["circle","disc","disc-leading-zero","square"],f=a.inArray(d["list-style-type"],e)>-1;d["list-style"]=f?"unordered":"ordered"}else d["list-style"]="none";var g=o.ancestor(b.sc,o.isPara);if(g&&g.style["line-height"])d["line-height"]=g.style.lineHeight;else{var h=parseInt(d["line-height"],10)/parseInt(d["font-size"],10);d["line-height"]=h.toFixed(1)}return d.anchor=b.isOnAnchor()&&o.ancestor(b.sc,o.isAnchor),d.ancestors=o.listAncestor(b.sc,o.isEditable),d.range=b,d}},X=function(){var d=this;this.insertOrderedList=function(a){this.toggleList("OL",a)},this.insertUnorderedList=function(a){this.toggleList("UL",a)},this.indent=function(d){var e=this,f=T.create(d).wrapBodyInlineWithPara(),g=f.nodes(o.isPara,{includeAncestor:!0}),h=c.clusterBy(g,b.peq2("parentNode"));a.each(h,function(b,d){var f=c.head(d);o.isLi(f)?e.wrapList(d,f.parentNode.nodeName):a.each(d,function(b,c){a(c).css("marginLeft",function(a,b){return(parseInt(b,10)||0)+25})})}),f.select()},this.outdent=function(d){var e=this,f=T.create(d).wrapBodyInlineWithPara(),g=f.nodes(o.isPara,{includeAncestor:!0}),h=c.clusterBy(g,b.peq2("parentNode"));a.each(h,function(b,d){var f=c.head(d);o.isLi(f)?e.releaseList([d]):a.each(d,function(b,c){a(c).css("marginLeft",function(a,b){return b=parseInt(b,10)||0,b>25?b-25:""})})}),f.select()},this.toggleList=function(e,f){var g=T.create(f).wrapBodyInlineWithPara(),h=g.nodes(o.isPara,{includeAncestor:!0}),i=g.paraBookmark(h),j=c.clusterBy(h,b.peq2("parentNode"));if(c.find(h,o.isPurePara)){var k=[];a.each(j,function(a,b){k=k.concat(d.wrapList(b,e))}),h=k}else{var l=g.nodes(o.isList,{includeAncestor:!0}).filter(function(b){return!a.nodeName(b,e)});l.length?a.each(l,function(a,b){o.replace(b,e)}):h=this.releaseList(j,!0)}T.createFromParaBookmark(i,h).select()},this.wrapList=function(a,b){var d=c.head(a),e=c.last(a),f=o.isList(d.previousSibling)&&d.previousSibling,g=o.isList(e.nextSibling)&&e.nextSibling,h=f||o.insertAfter(o.create(b||"UL"),e);return a=a.map(function(a){return o.isPurePara(a)?o.replace(a,"LI"):a}),o.appendChildNodes(h,a),g&&(o.appendChildNodes(h,c.from(g.childNodes)),o.remove(g)),a},this.releaseList=function(b,d){var e=[];return a.each(b,function(b,f){var g=c.head(f),h=c.last(f),i=d?o.lastAncestor(g,o.isList):g.parentNode,j=i.childNodes.length>1?o.splitTree(i,{node:h.parentNode,offset:o.position(h)+1},{isSkipPaddingBlankHTML:!0}):null,k=o.splitTree(i,{node:g.parentNode,offset:o.position(g)},{isSkipPaddingBlankHTML:!0});f=d?o.listDescendant(k,o.isLi):c.from(k.childNodes).filter(o.isLi),!d&&o.isList(i.parentNode)||(f=f.map(function(a){return o.replace(a,"P")})),a.each(c.from(f).reverse(),function(a,b){o.insertAfter(b,i)});var l=c.compact([i,k,j]);a.each(l,function(b,c){var d=[c].concat(o.listDescendant(c,o.isList));a.each(d.reverse(),function(a,b){o.nodeLength(b)||o.remove(b,!0)})}),e=e.concat(f)}),e}},Y=function(){var b=new X;this.insertTab=function(a,b){var c=o.createText(new Array(b+1).join(o.NBSP_CHAR));a=a.deleteContents(),a.insertNode(c,!0),a=T.create(c,b),a.select()},this.insertParagraph=function(c){var d=T.create(c);d=d.deleteContents(),d=d.wrapBodyInlineWithPara();var f,e=o.ancestor(d.sc,o.isPara);if(e){if(o.isEmpty(e)&&o.isLi(e))return void b.toggleList(e.parentNode.nodeName);if(o.isEmpty(e)&&o.isPara(e)&&o.isBlockquote(e.parentNode))o.insertAfter(e,e.parentNode),f=e;else{f=o.splitTree(e,d.getStartPoint());var g=o.listDescendant(e,o.isEmptyAnchor);g=g.concat(o.listDescendant(f,o.isEmptyAnchor)),a.each(g,function(a,b){o.remove(b)}),(o.isHeading(f)||o.isPre(f))&&o.isEmpty(f)&&(f=o.replace(f,"p"))}}else{var h=d.sc.childNodes[d.so];f=a(o.emptyPara)[0],h?d.sc.insertBefore(f,h):d.sc.appendChild(f)}T.create(f,0).normalize().select().scrollIntoView(c)}},Z=function(){this.tab=function(a,b){var d=o.ancestor(a.commonAncestor(),o.isCell),e=o.ancestor(d,o.isTable),f=o.listDescendant(e,o.isCell),g=c[b?"prev":"next"](f,d);g&&T.create(g,0).select()},this.createTable=function(b,c,d){for(var f,e=[],g=0;g<b;g++)e.push("<td>"+o.blank+"</td>");f=e.join("");for(var i,h=[],j=0;j<c;j++)h.push("<tr>"+f+"</tr>");i=h.join("");var k=a("<table>"+i+"</table>");return d&&d.tableClassName&&k.addClass(d.tableClassName),k[0]}},$="bogus",_=function(b){var d=this,e=b.layoutInfo.note,f=b.layoutInfo.editor,g=b.layoutInfo.editable,h=b.options,i=h.langInfo,j=g[0],k=null,m=new W,n=new Z,p=new Y,q=new X,r=new V(g);this.initialize=function(){g.on("keydown",function(a){a.keyCode===S.code.ENTER&&b.triggerEvent("enter",a),b.triggerEvent("keydown",a),h.shortcuts&&!a.isDefaultPrevented()&&d.handleKeyMap(a)}).on("keyup",function(a){b.triggerEvent("keyup",a)}).on("focus",function(a){b.triggerEvent("focus",a)}).on("blur",function(a){b.triggerEvent("blur",a)}).on("mousedown",function(a){b.triggerEvent("mousedown",a)}).on("mouseup",function(a){b.triggerEvent("mouseup",a)}).on("scroll",function(a){b.triggerEvent("scroll",a)}).on("paste",function(a){b.triggerEvent("paste",a)}),g.html(o.html(e)||o.emptyPara);var a=l.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";g.on(a,function(){b.triggerEvent("change",g.html())}),f.on("focusin",function(a){b.triggerEvent("focusin",a)}).on("focusout",function(a){b.triggerEvent("focusout",a)}),h.airMode||(h.width&&f.outerWidth(h.width),h.height&&g.outerHeight(h.height),h.maxHeight&&g.css("max-height",h.maxHeight),h.minHeight&&g.css("min-height",h.minHeight)),r.recordUndo()},this.destroy=function(){g.off()},this.handleKeyMap=function(a){var c=h.keyMap[l.isMac?"mac":"pc"],d=[];a.metaKey&&d.push("CMD"),a.ctrlKey&&!a.altKey&&d.push("CTRL"),a.shiftKey&&d.push("SHIFT");var e=S.nameFromCode[a.keyCode];e&&d.push(e);var f=c[d.join("+")];f?(a.preventDefault(),b.invoke(f)):S.isEdit(a.keyCode)&&this.afterCommand()},this.createRange=function(){return this.focus(),T.create(j)},this.saveRange=function(a){k=this.createRange(),a&&k.collapse().select()},this.restoreRange=function(){k&&(k.select(),this.focus())},this.saveTarget=function(a){g.data("target",a)},this.clearTarget=function(){g.removeData("target")},this.restoreTarget=function(){return g.data("target")},this.currentStyle=function(){var a=T.create();return a&&(a=a.normalize()),a?m.current(a):m.fromNode(g)},this.styleFromNode=function(a){return m.fromNode(a)},this.undo=function(){b.triggerEvent("before.command",g.html()),r.undo(),b.triggerEvent("change",g.html())},b.memo("help.undo",i.help.undo),this.redo=function(){b.triggerEvent("before.command",g.html()),r.redo(),b.triggerEvent("change",g.html())},b.memo("help.redo",i.help.redo);for(var s=this.beforeCommand=function(){b.triggerEvent("before.command",g.html()),d.focus()},t=this.afterCommand=function(a){r.recordUndo(),a||b.triggerEvent("change",g.html())},u=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],v=0,w=u.length;v<w;v++)this[u[v]]=function(a){return function(b){s(),document.execCommand(a,!1,b),t(!0)}}(u[v]),b.memo("help."+u[v],i.help[u[v]]);this.tab=function(){var a=this.createRange();a.isCollapsed()&&a.isOnCell()?n.tab(a):(s(),p.insertTab(a,h.tabSize),t())},b.memo("help.tab",i.help.tab),this.untab=function(){var a=this.createRange();a.isCollapsed()&&a.isOnCell()&&n.tab(a,!0)},b.memo("help.untab",i.help.untab),this.wrapCommand=function(a){return function(){s(),a.apply(d,arguments),t()}},this.insertParagraph=this.wrapCommand(function(){p.insertParagraph(j)}),b.memo("help.insertParagraph",i.help.insertParagraph),this.insertOrderedList=this.wrapCommand(function(){q.insertOrderedList(j)}),b.memo("help.insertOrderedList",i.help.insertOrderedList),this.insertUnorderedList=this.wrapCommand(function(){q.insertUnorderedList(j)}),b.memo("help.insertUnorderedList",i.help.insertUnorderedList),this.indent=this.wrapCommand(function(){q.indent(j)}),b.memo("help.indent",i.help.indent),this.outdent=this.wrapCommand(function(){q.outdent(j)}),b.memo("help.outdent",i.help.outdent),this.insertImage=function(a,c){return U.createImage(a,c).then(function(a){s(),"function"==typeof c?c(a):("string"==typeof c&&a.attr("data-filename",c),a.css("width",Math.min(g.width(),a.width()))),a.show(),T.create(j).insertNode(a[0]),T.createFromNodeAfter(a[0]).select(),t()}).fail(function(a){b.triggerEvent("image.upload.error",a)})},this.insertImages=function(c){a.each(c,function(a,c){var e=c.name;h.maximumImageFileSize&&h.maximumImageFileSize<c.size?b.triggerEvent("image.upload.error",i.image.maximumFileSizeError):U.readFileAsDataURL(c).then(function(a){return d.insertImage(a,e)}).fail(function(){b.triggerEvent("image.upload.error")})})},this.insertImagesOrCallback=function(a){var c=h.callbacks;c.onImageUpload?b.triggerEvent("image.upload",a):this.insertImages(a)},this.insertNode=this.wrapCommand(function(a){var b=this.createRange();b.insertNode(a),T.createFromNodeAfter(a).select()}),this.insertText=this.wrapCommand(function(a){var b=this.createRange(),c=b.insertNode(o.createText(a));T.create(c,o.nodeLength(c)).select()}),this.getSelectedText=function(){var a=this.createRange();return a.isOnAnchor()&&(a=T.createFromNode(o.ancestor(a.sc,o.isAnchor))),a.toString()},this.pasteHTML=this.wrapCommand(function(a){var b=this.createRange().pasteHTML(a);T.createFromNodeAfter(c.last(b)).select()}),this.formatBlock=this.wrapCommand(function(a){a=l.isMSIE?"<"+a+">":a,document.execCommand("FormatBlock",!1,a)}),this.formatPara=function(){this.formatBlock("P")},b.memo("help.formatPara",i.help.formatPara);for(var v=1;v<=6;v++)this["formatH"+v]=function(a){return function(){this.formatBlock("H"+a)}}(v),b.memo("help.formatH"+v,i.help["formatH"+v]);this.fontSize=function(b){var d=this.createRange();if(d&&d.isCollapsed()){var e=m.styleNodes(d),f=c.head(e);a(e).css({"font-size":b+"px"}),f&&!o.nodeLength(f)&&(f.innerHTML=o.ZERO_WIDTH_NBSP_CHAR,T.createFromNodeAfter(f.firstChild).select(),g.data($,f))}else s(),a(m.styleNodes(d)).css({"font-size":b+"px"}),t()},this.insertHorizontalRule=this.wrapCommand(function(){var a=this.createRange().insertNode(o.create("HR"));a.nextSibling&&T.create(a.nextSibling,0).normalize().select()}),b.memo("help.insertHorizontalRule",i.help.insertHorizontalRule),this.removeBogus=function(){var a=g.data($);if(a){var b=c.find(c.from(a.childNodes),o.isText),d=b.nodeValue.indexOf(o.ZERO_WIDTH_NBSP_CHAR);d!==-1&&b.deleteData(d,1),o.isEmpty(a)&&o.remove(a),g.removeData($)}},this.lineHeight=this.wrapCommand(function(a){m.stylePara(this.createRange(),{lineHeight:a})}),this.unlink=function(){var a=this.createRange();if(a.isOnAnchor()){var b=o.ancestor(a.sc,o.isAnchor);a=T.createFromNode(b),a.select(),s(),document.execCommand("unlink"),t()}},this.createLink=this.wrapCommand(function(b){var d=b.url,e=b.text,f=b.isNewWindow,g=b.range||this.createRange(),i=g.toString()!==e;h.onCreateLink&&(d=h.onCreateLink(d));var j=[];if(i){g=g.deleteContents();var k=g.insertNode(a("<A>"+e+"</A>")[0]);j.push(k)}else j=m.styleNodes(g,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});a.each(j,function(b,c){a(c).attr("href",d),f?a(c).attr("target","_blank"):a(c).removeAttr("target")});var l=T.createFromNodeBefore(c.head(j)),n=l.getStartPoint(),o=T.createFromNodeAfter(c.last(j)),p=o.getEndPoint();T.create(n.node,n.offset,p.node,p.offset).select()}),this.getLinkInfo=function(){var b=this.createRange().expand(o.isAnchor),d=a(c.head(b.nodes(o.isAnchor)));return{range:b,text:b.toString(),isNewWindow:!!d.length&&"_blank"===d.attr("target"),url:d.length?d.attr("href"):""}},this.color=this.wrapCommand(function(a){var b=a.foreColor,c=a.backColor;b&&document.execCommand("foreColor",!1,b),c&&document.execCommand("backColor",!1,c)}),this.insertTable=this.wrapCommand(function(a){var b=a.split("x"),c=this.createRange().deleteContents();c.insertNode(n.createTable(b[0],b[1],h))}),this.floatMe=this.wrapCommand(function(b){var c=a(this.restoreTarget());c.css("float",b)}),this.resize=this.wrapCommand(function(b){var c=a(this.restoreTarget());c.css({width:100*b+"%",height:""})}),this.resizeTo=function(a,b,c){var d;if(c){var e=a.y/a.x,f=b.data("ratio");d={width:f>e?a.x:a.y/f,height:f>e?a.x*f:a.y}}else d={width:a.x,height:a.y};b.css(d)},this.removeMedia=this.wrapCommand(function(){var c=a(this.restoreTarget()).detach();b.triggerEvent("media.delete",c,g)}),this.hasFocus=function(){return g.is(":focus")},this.focus=function(){this.hasFocus()||g.focus()},this.isEmpty=function(){return o.isEmpty(g[0])||o.emptyPara===g.html()},this.empty=function(){b.invoke("code",o.emptyPara)}},aa=function(b){var d=this,e=b.layoutInfo.editable;this.events={"summernote.keydown":function(a,c){d.needKeydownHook()&&(c.ctrlKey||c.metaKey)&&c.keyCode===S.code.V&&(b.invoke("editor.saveRange"),d.$paste.focus(),setTimeout(function(){d.pasteByHook()},0))}},this.needKeydownHook=function(){return l.isMSIE&&l.browserVersion>10||l.isFF},this.initialize=function(){this.needKeydownHook()?(this.$paste=a("<div />").attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),e.before(this.$paste),this.$paste.on("paste",function(a){b.triggerEvent("paste",a)})):e.on("paste",this.pasteByEvent)},this.destroy=function(){this.needKeydownHook()&&(this.$paste.remove(),this.$paste=null)},this.pasteByHook=function(){var c=this.$paste[0].firstChild;if(o.isImg(c)){for(var d=c.src,e=atob(d.split(",")[1]),f=new Uint8Array(e.length),g=0;g<e.length;g++)f[g]=e.charCodeAt(g);var h=new Blob([f],{type:"image/png"});h.name="clipboard.png",b.invoke("editor.restoreRange"),b.invoke("editor.focus"),b.invoke("editor.insertImagesOrCallback",[h])}else{var i=a("<div />").html(this.$paste.html()).html();b.invoke("editor.restoreRange"),b.invoke("editor.focus"),i&&b.invoke("editor.pasteHTML",i)}this.$paste.empty()},this.pasteByEvent=function(a){var d=a.originalEvent.clipboardData;if(d&&d.items&&d.items.length){var e=c.head(d.items);"file"===e.kind&&e.type.indexOf("image/")!==-1&&b.invoke("editor.insertImagesOrCallback",[e.getAsFile()]),b.invoke("editor.afterCommand")}}},ba=function(b){var c=a(document),d=b.layoutInfo.editor,e=b.layoutInfo.editable,f=b.options,g=f.langInfo,h=a(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(d);this.initialize=function(){f.disableDragAndDrop?c.on("drop",function(a){a.preventDefault()}):this.attachDragAndDropEvent()},this.attachDragAndDropEvent=function(){var f=a(),i=h.find(".note-dropzone-message");c.on("dragenter",function(a){var c=b.invoke("codeview.isActivated"),e=d.width()>0&&d.height()>0;c||f.length||!e||(d.addClass("dragover"),h.width(d.width()),h.height(d.height()),i.text(g.image.dragImageHere)),f=f.add(a.target)}).on("dragleave",function(a){f=f.not(a.target),f.length||d.removeClass("dragover")}).on("drop",function(){f=a(),d.removeClass("dragover")}),h.on("dragenter",function(){h.addClass("hover"),i.text(g.image.dropImage)}).on("dragleave",function(){h.removeClass("hover"),i.text(g.image.dragImageHere)}),h.on("drop",function(c){var d=c.originalEvent.dataTransfer;d&&d.files&&d.files.length?(c.preventDefault(),e.focus(),b.invoke("editor.insertImagesOrCallback",d.files)):a.each(d.types,function(c,e){var f=d.getData(e);e.toLowerCase().indexOf("text")>-1?b.invoke("editor.pasteHTML",f):a(f).each(function(){b.invoke("editor.insertNode",this)})})}).on("dragover",!1)}};l.hasCodeMirror&&(l.isSupportAmd?require(["codemirror"],function(a){ca=a}):ca=window.CodeMirror);var da=function(a){var b=a.layoutInfo.editor,c=a.layoutInfo.editable,d=a.layoutInfo.codable,e=a.options;this.sync=function(){var a=this.isActivated();a&&l.hasCodeMirror&&d.data("cmEditor").save()},this.isActivated=function(){return b.hasClass("codeview")},this.toggle=function(){this.isActivated()?this.deactivate():this.activate(),a.triggerEvent("codeview.toggled")},this.activate=function(){if(d.val(o.html(c,e.prettifyHtml)),d.height(c.height()),a.invoke("toolbar.updateCodeview",!0),b.addClass("codeview"),d.focus(),l.hasCodeMirror){var f=ca.fromTextArea(d[0],e.codemirror);if(e.codemirror.tern){var g=new ca.TernServer(e.codemirror.tern);f.ternServer=g,f.on("cursorActivity",function(a){g.updateArgHints(a)})}f.setSize(null,c.outerHeight()),d.data("cmEditor",f)}},this.deactivate=function(){if(l.hasCodeMirror){var f=d.data("cmEditor");d.val(f.getValue()),f.toTextArea()}var g=o.value(d,e.prettifyHtml)||o.emptyPara,h=c.html()!==g;c.html(g),c.height(e.height?d.height():"auto"),b.removeClass("codeview"),h&&a.triggerEvent("change",c.html(),c),c.focus(),a.invoke("toolbar.updateCodeview",!1)},this.destroy=function(){this.isActivated()&&this.deactivate()}},ea=24,fa=function(b){var c=a(document),d=b.layoutInfo.statusbar,e=b.layoutInfo.editable,f=b.options;this.initialize=function(){f.airMode||f.disableResizeEditor||d.on("mousedown",function(a){a.preventDefault(),a.stopPropagation();var b=e.offset().top-c.scrollTop();c.on("mousemove",function(a){var c=a.clientY-(b+ea);c=f.minheight>0?Math.max(c,f.minheight):c,c=f.maxHeight>0?Math.min(c,f.maxHeight):c,e.height(c)}).one("mouseup",function(){c.off("mousemove")})})},this.destroy=function(){d.off()}},ga=function(b){var c=b.layoutInfo.editor,d=b.layoutInfo.toolbar,e=b.layoutInfo.editable,f=b.layoutInfo.codable,g=a(window),h=a("html, body");this.toggle=function(){var a=function(a){e.css("height",a.h),f.css("height",a.h),f.data("cmeditor")&&f.data("cmeditor").setsize(null,a.h)};c.toggleClass("fullscreen"),this.isFullscreen()?(e.data("orgHeight",e.css("height")),g.on("resize",function(){a({h:g.height()-d.outerHeight()})}).trigger("resize"),h.css("overflow","hidden")):(g.off("resize"),a({h:e.data("orgHeight")}),h.css("overflow","visible")),b.invoke("toolbar.updateFullscreen",this.isFullscreen())},this.isFullscreen=function(){return c.hasClass("fullscreen")}},ha=function(b){var c=this,d=a(document),e=b.layoutInfo.editingArea,f=b.options;this.events={"summernote.mousedown":function(a,b){c.update(b.target)&&b.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){c.update()}},this.initialize=function(){this.$handle=a(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',f.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',f.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(e),this.$handle.on("mousedown",function(a){if(o.isControlSizing(a.target)){a.preventDefault(),a.stopPropagation();var e=c.$handle.find(".note-control-selection").data("target"),f=e.offset(),g=d.scrollTop();d.on("mousemove",function(a){b.invoke("editor.resizeTo",{x:a.clientX-f.left,y:a.clientY-(f.top-g)},e,!a.shiftKey),c.update(e[0])}).one("mouseup",function(a){a.preventDefault(),d.off("mousemove"),b.invoke("editor.afterCommand")}),e.data("ratio")||e.data("ratio",e.height()/e.width())}})},this.destroy=function(){this.$handle.remove()},this.update=function(c){var d=o.isImg(c),e=this.$handle.find(".note-control-selection");if(b.invoke("imagePopover.update",c),d){var f=a(c),g=f.position(),h={w:f.outerWidth(!0),h:f.outerHeight(!0)};e.css({display:"block",left:g.left,top:g.top,width:h.w,height:h.h}).data("target",f);var i=h.w+"x"+h.h;e.find(".note-control-selection-info").text(i),b.invoke("editor.saveTarget",c)}else this.hide();return d},this.hide=function(){b.invoke("editor.clearTarget"),this.$handle.children().hide()}},ia=function(b){var d=this,e="http://",f=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(a,b){b.isDefaultPrevented()||d.handleKeyup(b)},"summernote.keydown":function(a,b){d.handleKeydown(b)}},this.initialize=function(){this.lastWordRange=null},this.destroy=function(){this.lastWordRange=null},this.replace=function(){if(this.lastWordRange){var c=this.lastWordRange.toString(),d=c.match(f);if(d&&(d[1]||d[2])){var g=d[1]?c:e+c,h=a("<a />").html(c).attr("href",g)[0];this.lastWordRange.insertNode(h),this.lastWordRange=null,b.invoke("editor.focus")}}},this.handleKeydown=function(a){if(c.contains([S.code.ENTER,S.code.SPACE],a.keyCode)){var d=b.invoke("editor.createRange").getWordRange();this.lastWordRange=d}},this.handleKeyup=function(a){c.contains([S.code.ENTER,S.code.SPACE],a.keyCode)&&this.replace()}},ja=function(a){var b=a.layoutInfo.note;this.events={"summernote.change":function(){b.val(a.invoke("code"))}},this.shouldInitialize=function(){return o.isTextarea(b[0])}},ka=function(b){var c=this,d=b.layoutInfo.editingArea,e=b.options;this.events={"summernote.init summernote.change":function(){c.update()},"summernote.codeview.toggled":function(){c.update()}},this.shouldInitialize=function(){return!!e.placeholder},this.initialize=function(){this.$placeholder=a('<div class="note-placeholder">'),this.$placeholder.on("click",function(){b.invoke("focus")}).text(e.placeholder).prependTo(d)},this.destroy=function(){this.$placeholder.remove()},this.update=function(){var a=!b.invoke("codeview.isActivated")&&b.invoke("editor.isEmpty");this.$placeholder.toggle(a)}},la=function(d){var e=this,f=a.summernote.ui,g=d.layoutInfo.toolbar,h=d.options,i=h.langInfo,j=b.invertObject(h.keyMap[l.isMac?"mac":"pc"]),k=this.representShortcut=function(a){if(!h.shortcuts)return"";var b=j[a];return l.isMac&&(b=b.replace("CMD","⌘").replace("SHIFT","⇧")),b=b.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")," ("+b+")"};this.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.fontInstalledMap={}},this.destroy=function(){delete this.fontInstalledMap},this.isFontInstalled=function(a){return e.fontInstalledMap.hasOwnProperty(a)||(e.fontInstalledMap[a]=l.isFontInstalled(a)||c.contains(h.fontNamesIgnoreCheck,a)),e.fontInstalledMap[a]},this.addToolbarButtons=function(){d.memo("button.style",function(){return f.dropdownButton({title:f.icon(h.icons.magic),className:"dropdown-style",tooltip:i.style.style,items:d.options.styleTags,template:function(a){"string"==typeof a&&(a={tag:a,title:a});var b=a.tag,c=a.title||b,d=a.style?' style="'+a.style+'" ':"",e=a.className?' class="'+a.className+'"':"";return"<"+b+d+e+">"+c+"</"+b+">"},itemClick:d.createInvokeHandler("editor.formatBlock")})}),d.memo("button.bold",function(){return f.button({contents:f.icon(h.icons.bold),tooltip:i.font.bold+k("bold"),click:d.createInvokeHandler("editor.bold")}).render()}),d.memo("button.italic",function(){return f.button({contents:f.icon(h.icons.italic),tooltip:i.font.italic+k("italic"),click:d.createInvokeHandler("editor.italic")}).render()}),d.memo("button.underline",function(){return f.button({contents:f.icon(h.icons.underline),tooltip:i.font.underline+k("underline"),click:d.createInvokeHandler("editor.underline")}).render()}),d.memo("button.clear",function(){return f.button({contents:f.icon(h.icons.eraser),tooltip:i.font.clear+k("removeFormat"),click:d.createInvokeHandler("editor.removeFormat")}).render()}),d.memo("button.strikethrough",function(){return f.button({contents:f.icon(h.icons.strikethrough),tooltip:i.font.strikethrough+k("strikethrough"),click:d.createInvokeHandler("editor.strikethrough")}).render()}),d.memo("button.superscript",function(){return f.button({contents:f.icon(h.icons.superscript),tooltip:i.font.superscript,click:d.createInvokeHandler("editor.superscript")}).render()}),d.memo("button.subscript",function(){return f.button({contents:f.icon(h.icons.subscript),tooltip:i.font.subscript,click:d.createInvokeHandler("editor.subscript")}).render()}),d.memo("button.fontname",function(){return f.dropdownCheckButton({title:'<span class="note-current-fontname"/>',className:"dropdown-fontname",tooltip:i.font.name,checkClassName:h.icons.menuCheck,items:h.fontNames.filter(e.isFontInstalled),template:function(a){return'<span style="font-family:'+a+'">'+a+"</span>"},itemClick:d.createInvokeHandler("editor.fontName")})}),d.memo("button.fontsize",function(){return f.dropdownCheckButton({title:'<span class="note-current-fontsize"/>',className:"dropdown-fontsize",tooltip:i.font.size,checkClassName:h.icons.menuCheck,items:h.fontSizes,template:function(a){return'<span style="font-family:'+a+'">'+a+"</span>"},itemClick:d.createInvokeHandler("editor.fontSize")})});var c=function(b){return f.colorDropdownButton({title:f.icon(h.icons.font+" note-recent-color"),lang:i,currentClick:function(b){var c=a(b.currentTarget);d.invoke("editor.color",{backColor:c.attr("data-backColor"),foreColor:c.attr("data-foreColor")})},colors:h.colors,itemClick:function(a,b){d.invoke("editor."+a,b)}},b||"")};d.memo("button.color",function(){return c()}),d.memo("button.ul",function(){return f.button({
contents:f.icon(h.icons.unorderedlist),tooltip:i.lists.unordered+k("insertUnorderedList"),click:d.createInvokeHandler("editor.insertUnorderedList")}).render()}),d.memo("button.ol",function(){return f.button({contents:f.icon(h.icons.orderedlist),tooltip:i.lists.ordered+k("insertOrderedList"),click:d.createInvokeHandler("editor.insertOrderedList")}).render()});var g=f.button({contents:f.icon(h.icons.alignLeft),tooltip:i.paragraph.left+k("justifyLeft"),click:d.createInvokeHandler("editor.justifyLeft")}),j=f.button({contents:f.icon(h.icons.alignCenter),tooltip:i.paragraph.center+k("justifyCenter"),click:d.createInvokeHandler("editor.justifyCenter")}),l=f.button({contents:f.icon(h.icons.alignRight),tooltip:i.paragraph.right+k("justifyRight"),click:d.createInvokeHandler("editor.justifyRight")}),m=f.button({contents:f.icon(h.icons.alignJustify),tooltip:i.paragraph.justify+k("justifyFull"),click:d.createInvokeHandler("editor.justifyFull")}),n=f.button({contents:f.icon(h.icons.outdent),tooltip:i.paragraph.outdent+k("outdent"),click:d.createInvokeHandler("editor.outdent")}),o=f.button({contents:f.icon(h.icons.indent),tooltip:i.paragraph.indent+k("indent"),click:d.createInvokeHandler("editor.indent")});d.memo("button.justifyLeft",b.invoke(g,"render")),d.memo("button.justifyCenter",b.invoke(j,"render")),d.memo("button.justifyRight",b.invoke(l,"render")),d.memo("button.justifyFull",b.invoke(m,"render")),d.memo("button.outdent",b.invoke(n,"render")),d.memo("button.indent",b.invoke(o,"render")),d.memo("button.paragraph",function(){return f.paragraphDropdownButton({title:f.icon(h.icons.alignLeft),tooltip:i.paragraph.paragraph,items:[[g,j,l,m],[n,o]]})}),d.memo("button.height",function(){return f.dropdownCheckButton({title:f.icon(h.icons.textHeight),className:"dropdown-line-height",tooltip:i.font.height,items:h.lineHeights,checkClassName:h.icons.menuCheck,itemClick:d.createInvokeHandler("editor.lineHeight")})}),d.memo("button.table",function(){return f.tableDropdownButton({title:f.icon(h.icons.table),tooltip:i.table.table,col:h.insertTableMaxSize.col,row:h.insertTableMaxSize.row,itemClick:d.createInvokeHandler("editor.insertTable")})}),d.memo("button.link",function(){return f.button({contents:f.icon(h.icons.link),tooltip:i.link.link+k("linkDialog.show"),click:d.createInvokeHandler("linkDialog.show")}).render()}),d.memo("button.picture",function(){return f.button({contents:f.icon(h.icons.picture),tooltip:i.image.image,click:d.createInvokeHandler("imageDialog.show")}).render()}),d.memo("button.video",function(){return f.button({contents:f.icon(h.icons.video),tooltip:i.video.video,click:d.createInvokeHandler("videoDialog.show")}).render()}),d.memo("button.hr",function(){return f.button({contents:f.icon(h.icons.minus),tooltip:i.hr.insert+k("insertHorizontalRule"),click:d.createInvokeHandler("editor.insertHorizontalRule")}).render()}),d.memo("button.fullscreen",function(){return f.button({contents:f.icon(h.icons.arrowsAlt),tooltip:i.options.fullscreen,click:d.createInvokeHandler("fullscreen.toggle")}).render()}),d.memo("button.codeview",function(){return f.button({contents:f.icon(h.icons.code),tooltip:i.options.codeview,click:d.createInvokeHandler("codeview.toggle")}).render()}),d.memo("button.redo",function(){return f.button({contents:f.icon(h.icons.redo),tooltip:i.history.redo+k("redo"),click:d.createInvokeHandler("editor.redo")}).render()}),d.memo("button.undo",function(){return f.button({contents:f.icon(h.icons.undo),tooltip:i.history.undo+k("undo"),click:d.createInvokeHandler("editor.undo")}).render()}),d.memo("button.help",function(){return f.button({contents:f.icon(h.icons.question),tooltip:i.options.help,click:d.createInvokeHandler("helpDialog.show")}).render()})},this.addImagePopoverButtons=function(){d.memo("button.imageSize100",function(){return f.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:i.image.resizeFull,click:d.createInvokeHandler("editor.resize","1")}).render()}),d.memo("button.imageSize50",function(){return f.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:i.image.resizeHalf,click:d.createInvokeHandler("editor.resize","0.5")}).render()}),d.memo("button.imageSize25",function(){return f.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:i.image.resizeQuarter,click:d.createInvokeHandler("editor.resize","0.25")}).render()}),d.memo("button.floatLeft",function(){return f.button({contents:f.icon(h.icons.alignLeft),tooltip:i.image.floatLeft,click:d.createInvokeHandler("editor.floatMe","left")}).render()}),d.memo("button.floatRight",function(){return f.button({contents:f.icon(h.icons.alignRight),tooltip:i.image.floatRight,click:d.createInvokeHandler("editor.floatMe","right")}).render()}),d.memo("button.floatNone",function(){return f.button({contents:f.icon(h.icons.alignJustify),tooltip:i.image.floatNone,click:d.createInvokeHandler("editor.floatMe","none")}).render()}),d.memo("button.removeMedia",function(){return f.button({contents:f.icon(h.icons.trash),tooltip:i.image.remove,click:d.createInvokeHandler("editor.removeMedia")}).render()})},this.addLinkPopoverButtons=function(){d.memo("button.linkDialogShow",function(){return f.button({contents:f.icon(h.icons.link),tooltip:i.link.edit,click:d.createInvokeHandler("linkDialog.show")}).render()}),d.memo("button.unlink",function(){return f.button({contents:f.icon(h.icons.unlink),tooltip:i.link.unlink,click:d.createInvokeHandler("editor.unlink")}).render()})},this.build=function(b,c){for(var e=0,g=c.length;e<g;e++){for(var h=c[e],i=h[0],j=h[1],k=f.buttonGroup({className:"note-"+i}).render(),l=0,m=j.length;l<m;l++){var n=d.memo("button."+j[l]);if(n){var o="function"==typeof n?n(d):n,p=a(o).addClass("note-btn-"+j[l]);k.append(p)}}k.appendTo(b)}},this.updateCurrentStyle=function(){var a=d.invoke("editor.currentStyle");if(this.updateBtnStates({".note-btn-bold":function(){return"bold"===a["font-bold"]},".note-btn-italic":function(){return"italic"===a["font-italic"]},".note-btn-underline":function(){return"underline"===a["font-underline"]},".note-btn-subscript":function(){return"subscript"===a["font-subscript"]},".note-btn-superscript":function(){return"superscript"===a["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===a["font-strikethrough"]}}),a["font-family"]){var b=a["font-family"].split(",").map(function(a){return a.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),h=c.find(b,e.isFontInstalled);f.check(g.find(".dropdown-fontname"),h),g.find(".note-current-fontname").text(h).css({"font-family":h})}if(a["font-size"]){var i=a["font-size"];f.check(g.find(".dropdown-fontsize"),i),g.find(".note-current-fontsize").text(i)}if(a["line-height"]){var j=a["line-height"];f.check(g.find(".dropdown-line-height"),j)}},this.updateBtnStates=function(b){a.each(b,function(a,b){f.toggleBtnActive(g.find(a),b())})}},ma=function(b){var c=a.summernote.ui,d=b.layoutInfo.note,e=b.layoutInfo.editor,f=b.layoutInfo.toolbar,g=b.options;this.shouldInitialize=function(){return!g.airMode},this.initialize=function(){g.toolbar=g.toolbar||[],g.toolbar.length?b.invoke("buttons.build",f,g.toolbar):f.hide(),this.changeContainer(!1),d.on("summernote.keyup summernote.mouseup summernote.change",function(){b.invoke("buttons.updateCurrentStyle")}),b.invoke("buttons.updateCurrentStyle")},this.destroy=function(){f.children().remove()},this.changeContainer=function(a){a?f.prependTo(e):g.toolbarContainer&&f.appendTo(g.toolbarContainer)},this.updateFullscreen=function(a){c.toggleBtnActive(f.find(".note-btn-fullscreen"),a),this.changeContainer(a)},this.updateCodeview=function(a){c.toggleBtnActive(f.find(".note-btn-codeview"),a),a?this.deactivate():this.activate()},this.activate=function(a){var b=f.find("button");a||(b=b.not(".note-btn-codeview")),c.toggleBtn(b,!0)},this.deactivate=function(a){var b=f.find("button");a||(b=b.not(".note-btn-codeview")),c.toggleBtn(b,!1)}},na=function(b){var c=this,d=a.summernote.ui,e=b.layoutInfo.editor,f=b.options,g=f.langInfo;this.initialize=function(){var b=f.dialogsInBody?a(document.body):e;this.$dialog=d.linkDialog({lang:g,disableLinkTarget:f.disableLinkTarget,fade:f.dialogsFade}),this.$dialog.appendTo(b)},this.destroy=function(){d.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(a,b){a.on("keypress",function(a){a.keyCode===S.code.ENTER&&b.trigger("click")})},this.showLinkDialog=function(e){return a.Deferred(function(a){var f=c.$dialog.find(".note-link-text"),g=c.$dialog.find(".note-link-url"),h=c.$dialog.find(".note-link-btn"),i=c.$dialog.find("input[type=checkbox]");d.onDialogShown(c.$dialog,function(){b.triggerEvent("dialog.shown"),f.val(e.text),f.on("input",function(){d.toggleBtn(h,f.val()&&g.val()),e.text=f.val()}),e.url||(e.url=e.text||"http://",d.toggleBtn(h,e.text)),g.on("input",function(){d.toggleBtn(h,f.val()&&g.val()),e.text||f.val(g.val())}).val(e.url).trigger("focus"),c.bindEnterKey(g,h),c.bindEnterKey(f,h),i.prop("checked",e.isNewWindow),h.one("click",function(b){b.preventDefault(),a.resolve({range:e.range,url:g.val(),text:f.val(),isNewWindow:i.is(":checked")}),c.$dialog.modal("hide")})}),d.onDialogHidden(c.$dialog,function(){f.off("input keypress"),g.off("input keypress"),h.off("click"),"pending"===a.state()&&a.reject()}),d.showDialog(c.$dialog)}).promise()},this.show=function(){var a=b.invoke("editor.getLinkInfo");b.invoke("editor.saveRange"),this.showLinkDialog(a).then(function(a){b.invoke("editor.restoreRange"),b.invoke("editor.createLink",a)}).fail(function(){b.invoke("editor.restoreRange")})},b.memo("help.linkDialog.show",f.langInfo.help["linkDialog.show"])},oa=function(b){var d=this,e=a.summernote.ui,f=b.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){d.update()},"summernote.dialog.shown":function(){d.hide()}},this.shouldInitialize=function(){return!c.isEmpty(f.popover.link)},this.initialize=function(){this.$popover=e.popover({className:"note-link-popover",callback:function(a){var b=e.getPopoverContent(a);b.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var a=e.getPopoverContent(this.$popover);b.invoke("buttons.build",a,f.popover.link)},this.destroy=function(){this.$popover.remove()},this.update=function(){if(!b.invoke("editor.hasFocus"))return void this.hide();var c=b.invoke("editor.createRange");if(c.isCollapsed()&&c.isOnAnchor()){var d=o.ancestor(c.sc,o.isAnchor),e=a(d).attr("href");this.$popover.find("a").attr("href",e).html(e);var f=o.posFromPlaceholder(d);this.$popover.css({display:"block",left:f.left,top:f.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},pa=function(b){var c=this,d=a.summernote.ui,e=b.layoutInfo.editor,f=b.options,g=f.langInfo;this.initialize=function(){var b=f.dialogsInBody?a(document.body):e,c="";if(f.maximumImageFileSize){var h=Math.floor(Math.log(f.maximumImageFileSize)/Math.log(1024)),i=1*(f.maximumImageFileSize/Math.pow(1024,h)).toFixed(2)+" "+" KMGTP"[h]+"B";c="<small>"+g.image.maximumFileSize+" : "+i+"</small>"}this.$dialog=d.imageDialog({imageLimitation:c,lang:g,fade:f.dialogsFade}),this.$dialog.appendTo(b)},this.destroy=function(){d.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(a,b){a.on("keypress",function(a){a.keyCode===S.code.ENTER&&b.trigger("click")})},this.show=function(){b.invoke("editor.saveRange"),this.showImageDialog().then(function(a){d.hideDialog(c.$dialog),b.invoke("editor.restoreRange"),"string"==typeof a?b.invoke("editor.insertImage",a):b.invoke("editor.insertImagesOrCallback",a)}).fail(function(){b.invoke("editor.restoreRange")})},this.showImageDialog=function(){return a.Deferred(function(a){var e=c.$dialog.find(".note-image-input"),f=c.$dialog.find(".note-image-url"),g=c.$dialog.find(".note-image-btn");d.onDialogShown(c.$dialog,function(){b.triggerEvent("dialog.shown"),e.replaceWith(e.clone().on("change",function(){a.resolve(this.files||this.value)}).val("")),g.click(function(b){b.preventDefault(),a.resolve(f.val())}),f.on("keyup paste",function(){var a=f.val();d.toggleBtn(g,a)}).val("").trigger("focus"),c.bindEnterKey(f,g)}),d.onDialogHidden(c.$dialog,function(){e.off("change"),f.off("keyup paste keypress"),g.off("click"),"pending"===a.state()&&a.reject()}),d.showDialog(c.$dialog)})}},qa=function(b){var d=a.summernote.ui,e=b.options;this.shouldInitialize=function(){return!c.isEmpty(e.popover.image)},this.initialize=function(){this.$popover=d.popover({className:"note-image-popover"}).render().appendTo("body");var a=d.getPopoverContent(this.$popover);b.invoke("buttons.build",a,e.popover.image)},this.destroy=function(){this.$popover.remove()},this.update=function(a){if(o.isImg(a)){var b=o.posFromPlaceholder(a);this.$popover.css({display:"block",left:b.left,top:b.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},ra=function(b){var c=this,d=a.summernote.ui,e=b.layoutInfo.editor,f=b.options,g=f.langInfo;this.initialize=function(){var b=f.dialogsInBody?a(document.body):e;this.$dialog=d.videoDialog({lang:g,fade:f.dialogsFade}),this.$dialog.appendTo(b)},this.destroy=function(){d.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(a,b){a.on("keypress",function(a){a.keyCode===S.code.ENTER&&b.trigger("click")})},this.createVideoNode=function(b){var u,c=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,d=b.match(c),e=/\/\/instagram.com\/p\/(.[a-zA-Z0-9_-]*)/,f=b.match(e),g=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/,h=b.match(g),i=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,j=b.match(i),k=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,l=b.match(k),m=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,n=b.match(m),o=/^.+.(mp4|m4v)$/,p=b.match(o),q=/^.+.(ogg|ogv)$/,r=b.match(q),s=/^.+.(webm)$/,t=b.match(s);if(d&&11===d[1].length){var v=d[1];u=a("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+v).attr("width","640").attr("height","360")}else if(f&&f[0].length)u=a("<iframe>").attr("frameborder",0).attr("src",f[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(h&&h[0].length)u=a("<iframe>").attr("frameborder",0).attr("src",h[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(j&&j[3].length)u=a("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+j[3]).attr("width","640").attr("height","360");else if(l&&l[2].length)u=a("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+l[2]).attr("width","640").attr("height","360");else if(n&&n[1].length)u=a("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+n[1]);else{if(!(p||r||t))return!1;u=a("<video controls>").attr("src",b).attr("width","640").attr("height","360")}return u.addClass("note-video-clip"),u[0]},this.show=function(){var a=b.invoke("editor.getSelectedText");b.invoke("editor.saveRange"),this.showVideoDialog(a).then(function(a){d.hideDialog(c.$dialog),b.invoke("editor.restoreRange");var e=c.createVideoNode(a);e&&b.invoke("editor.insertNode",e)}).fail(function(){b.invoke("editor.restoreRange")})},this.showVideoDialog=function(e){return a.Deferred(function(a){var f=c.$dialog.find(".note-video-url"),g=c.$dialog.find(".note-video-btn");d.onDialogShown(c.$dialog,function(){b.triggerEvent("dialog.shown"),f.val(e).on("input",function(){d.toggleBtn(g,f.val())}).trigger("focus"),g.click(function(b){b.preventDefault(),a.resolve(f.val())}),c.bindEnterKey(f,g)}),d.onDialogHidden(c.$dialog,function(){f.off("input"),g.off("click"),"pending"===a.state()&&a.reject()}),d.showDialog(c.$dialog)})}},sa=function(b){var c=this,d=a.summernote.ui,e=b.layoutInfo.editor,f=b.options,g=f.langInfo;this.createShortCutList=function(){var c=f.keyMap[l.isMac?"mac":"pc"];return Object.keys(c).map(function(d){var e=c[d],f=a('<div><div class="help-list-item"/></div>');return f.append(a("<label><kbd>"+d+"</kdb></label>").css({width:180,"margin-right":10})).append(a("<span/>").html(b.memo("help."+e)||e)),f.html()}).join("")},this.initialize=function(){var b=f.dialogsInBody?a(document.body):e,c=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.1</a> · ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a> · ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=d.dialog({title:g.options.help,fade:f.dialogsFade,body:this.createShortCutList(),footer:c,callback:function(a){d.getDialogBody(a).css({"max-height":300,"overflow-y":"auto"})}}).render().appendTo(b)},this.destroy=function(){d.hideDialog(this.$dialog),this.$dialog.remove()},this.showHelpDialog=function(){return a.Deferred(function(a){d.onDialogShown(c.$dialog,function(){b.triggerEvent("dialog.shown"),a.resolve()}),d.showDialog(c.$dialog)}).promise()},this.show=function(){b.invoke("editor.saveRange"),this.showHelpDialog().then(function(){b.invoke("editor.restoreRange")})}},ta=function(d){var e=this,f=a.summernote.ui,g=d.options,h=20;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){e.update()},"summernote.change summernote.dialog.shown":function(){e.hide()},"summernote.focusout":function(a,c){l.isFF||c.relatedTarget&&o.ancestor(c.relatedTarget,b.eq(e.$popover[0]))||e.hide()}},this.shouldInitialize=function(){return g.airMode&&!c.isEmpty(g.popover.air)},this.initialize=function(){this.$popover=f.popover({className:"note-air-popover"}).render().appendTo("body");var a=f.getPopoverContent(this.$popover);d.invoke("buttons.build",a,g.popover.air)},this.destroy=function(){this.$popover.remove()},this.update=function(){var a=d.invoke("editor.currentStyle");if(a.range&&!a.range.isCollapsed()){var e=c.last(a.range.getClientRects());if(e){var f=b.rect2bnd(e);this.$popover.css({display:"block",left:Math.max(f.left+f.width/2,0)-h,top:f.top+f.height})}}else this.hide()},this.hide=function(){this.$popover.hide()}},ua=function(d){var e=this,f=a.summernote.ui,g=5,h=d.options.hint||[],i=d.options.hintDirection||"bottom",j=a.isArray(h)?h:[h];this.events={"summernote.keyup":function(a,b){b.isDefaultPrevented()||e.handleKeyup(b)},"summernote.keydown":function(a,b){e.handleKeydown(b)},"summernote.dialog.shown":function(){e.hide()}},this.shouldInitialize=function(){return j.length>0},this.initialize=function(){this.lastWordRange=null,this.$popover=f.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo("body"),this.$popover.hide(),this.$content=f.getPopoverContent(this.$popover),this.$content.on("click",".note-hint-item",function(){e.$content.find(".active").removeClass("active"),a(this).addClass("active"),e.replace()})},this.destroy=function(){this.$popover.remove()},this.selectItem=function(a){this.$content.find(".active").removeClass("active"),a.addClass("active"),this.$content[0].scrollTop=a[0].offsetTop-this.$content.innerHeight()/2},this.moveDown=function(){var a=this.$content.find(".note-hint-item.active"),b=a.next();if(b.length)this.selectItem(b);else{var c=a.parent().next();c.length||(c=this.$content.find(".note-hint-group").first()),this.selectItem(c.find(".note-hint-item").first())}},this.moveUp=function(){var a=this.$content.find(".note-hint-item.active"),b=a.prev();if(b.length)this.selectItem(b);else{var c=a.parent().prev();c.length||(c=this.$content.find(".note-hint-group").last()),this.selectItem(c.find(".note-hint-item").last())}},this.replace=function(){var a=this.$content.find(".note-hint-item.active");if(a.length){var b=this.nodeFromItem(a);this.lastWordRange.insertNode(b),T.createFromNode(b).collapse().select(),this.lastWordRange=null,this.hide(),d.invoke("editor.focus")}},this.nodeFromItem=function(a){var b=j[a.data("index")],c=a.data("item"),d=b.content?b.content(c):c;return"string"==typeof d&&(d=o.createText(d)),d},this.createItemTemplates=function(b,c){var d=j[b];return c.map(function(c,e){var f=a('<div class="note-hint-item"/>');return f.append(d.template?d.template(c):c+""),f.data({index:b,item:c}),0===b&&0===e&&f.addClass("active"),f})},this.handleKeydown=function(a){this.$popover.is(":visible")&&(a.keyCode===S.code.ENTER?(a.preventDefault(),this.replace()):a.keyCode===S.code.UP?(a.preventDefault(),this.moveUp()):a.keyCode===S.code.DOWN&&(a.preventDefault(),this.moveDown()))},this.searchKeyword=function(a,b,c){var d=j[a];if(d&&d.match.test(b)&&d.search){var e=d.match.exec(b);d.search(e[1],c)}else c()},this.createGroup=function(b,c){var d=a('<div class="note-hint-group note-hint-group-'+b+'"/>');return this.searchKeyword(b,c,function(a){a=a||[],a.length&&(d.html(e.createItemTemplates(b,a)),e.show())}),d},this.handleKeyup=function(a){if(c.contains([S.code.ENTER,S.code.UP,S.code.DOWN],a.keyCode)){if(a.keyCode===S.code.ENTER&&this.$popover.is(":visible"))return}else{var f=d.invoke("editor.createRange").getWordRange(),h=f.toString();if(j.length&&h){this.$content.empty();var k=b.rect2bnd(c.last(f.getClientRects()));k&&(this.$popover.hide(),this.lastWordRange=f,j.forEach(function(a,b){a.match.test(h)&&e.createGroup(b,h).appendTo(e.$content)}),"top"===i?this.$popover.css({left:k.left,top:k.top-this.$popover.outerHeight()-g}):this.$popover.css({left:k.left,top:k.top+k.height+g}))}else this.hide()}},this.show=function(){this.$popover.show()},this.hide=function(){this.$popover.hide()}};a.summernote=a.extend(a.summernote,{version:"0.8.1",ui:R,plugins:{},options:{modules:{editor:_,clipboard:aa,dropzone:ba,codeview:da,statusbar:fa,fullscreen:ga,handle:ha,hintPopover:ua,autoLink:ia,autoSync:ja,placeholder:ka,buttons:la,toolbar:ma,linkDialog:na,linkPopover:oa,imageDialog:pa,imagePopover:qa,videoDialog:ra,helpDialog:sa,airPopover:ta},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,direction:null,styleTags:["p",{tag:"blockquote",className:"blockquote"},"pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onSubmit:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})});